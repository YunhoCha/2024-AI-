# 2024년 8월 19일 한양대학교 사학과 '초보자를 위한 AI툴 활용법'
요약 : 'ChatGPT를 활용한 텍스트마이닝 및 통계분석 입문하기'의 강의자료, 코드, 사용법\
발표자 : 한양대학교 사학과 석사과정 차윤호
<br><br>

## 0. 개요
  
- 국립중앙도서관 신문아카이브 https://www.nl.go.kr/newspaper/index.do 에서 자료 수집하는 법, 스크래핑 코드 사용법 학습하기.
- ChatGPT를 활용하여 신문 영어 텍스트 분석하기(텍스트마이닝)
- ChatGPT를 활용하여 역사 수치 데이터 분석하기(통계분석)

<br><br>
## 1. 신문 아카이브에서 자료수집
<details>
  <summary>첫번째 방법(기본 제공하는 방법)</summary>
  
### 1) 신문 아카이브에서 제공하는 '신문브라우징'과 데이터 다운로드 
![image](https://github.com/user-attachments/assets/94da38e7-cdde-4906-a2a1-cc605f5ec056)
![image](https://github.com/user-attachments/assets/27b10222-93d9-4bfc-95ad-8311c1c6989b)
![제목 없음](https://github.com/user-attachments/assets/f89a93ac-d0c8-45a6-b0ce-c13856b3da5b)

  
</details>
<details>
  <summary>두번째 방법(스크래핑 코드)</summary>
  
### 2) 스크래핑 코드 사용법 
1. 본 깃허브 페이지 상단의 file 중 '신문아카이브_스크래핑_코드.ipynb' 클릭<br><br>
2. **'open in colab'** 클릭<br><br>
3. 좌측 파일 마크 클릭
- ![image](https://github.com/user-attachments/assets/3966fb80-75ec-4ca2-8700-bf466fd840a7)<br><br>
4. 차례대로 셀 실행 버튼 클릭(셀 하나가 완료되면 다음 셀 실행)
- ![image](https://github.com/user-attachments/assets/35c518c5-0637-40b2-96dc-62a17939dad7)<br><br>
5. 세 번째 셀에서 ID 입력할 때 스크래핑 할 신문 기사의 첫 아이디 입력 후 엔터, 마지막 아이디 입력 후 엔터

<div style="margin: 0 auto; width: fit-content;">

| 신문 제목 | 처음 아이디 | 마지막 아이디 |
|----------|----------|----------|
| 독립신문 영문판 | 00093088662 | 00093105675 |
| 대한매일신보 영문판 | 00093087842 | 00093088661 |
| Row 3, Column 1 | Row 3, Column 2 | Row 3, Column 3 |
| Row 4, Column 1 | Row 4, Column 2 | Row 4, Column 3 |

</div>

</details>

<br><br>
## 2. 텍스트 데이터 분석
### 1) **왜 데이터프레임인가?** : 컴퓨터로 분석할 때에는 '정형 데이터'가 명령하기 수월하다. 
![image](https://github.com/user-attachments/assets/0b2541d5-cbfe-4ac8-b64b-58bf2a7b1668)
출처 : 유인태, 한문 고전 텍스트와 데이터 처리(한림 DH 워크숍 시리즈), 2024.7.3.
<br>
### 2) ChatGPT로 **데이터 프레임** 수정하기 
<br>
  ChatGPT 채팅창에 수정할 엑셀, csv 형태의 파일을 업로드하고, 조건에 따른 파일의 수정을 명령할 수 있다. 특정 단어(글자)가 들어간 파일을 필터링하거나 행의 배열을 바꿀 수 있다.
<br>

cf.**데이터 프레임 자료를 활용해 기사 번역해보기** : 특정 열, 행, 셀을 클릭하고 해당 위치에 대한 명령을 할 수 있다.

<br>

### 3) 영어 텍스트 전처리
**영어와 한국어 텍스트의 차이**

<br>

  "일반적으로 한 어절이 한 단어인 영문텍스트에 토픽모델링을 적용할 경우, 형태소 분석이나 어근 추출과 같은 텍스트 전처리 과정을 거치지 않는다. 공백으로 분리된 어절(token)을 텍스트 처리에 그대로 사용하고, 어근이 동일한 단어의 단수형이나 복수형, 동명사 등 한 단어의 다양한 활용형을 모두 다르게 처리하여 단어 사용의 맥락을 파악한다. **그러나 한글의 경우 한 어절에 어간에 조사가 결합되어 있는 교착어로, 영문텍스트처럼 단일 형태소로 구성되어 있지 않기 때문에 별도의 자연어처리 과정이 필요하다.**"

<br>

출처 : 정유경, 2020, 「텍스트의 계량 분석을 활용한 근대전환기 신문의 시계열적 주제 분석법 - 『황성신문』 논설을 대상으로」, 『역사문제연구』24-1, p.141.

<br>

### 4) 데이터 분석 방법 질문하기, 전처리 수행하기(대소문자 통일, 불용어 제거, 표제어 추출 작업), 말뭉치 형성하기

<br>

"업로드 한 파일이 어떤 파일인지 확인해줘"\
"content 열을 기준으로 분석하고 싶은데 어떻게 분석하면 좋을지 알려줘"\
"대소문자를 통일해주고, 내가 업로드한 파일로 불용어를 제거하고, 내가 업로드한 파일로 어간 및 표제어 추출 등을 진행해서 새로운 열에 말뭉치를 형성해줘."\
<br>
"content를 중심으로 진행할거고, 텍스트 전처리를 진행해서 말뭉치를 형성할 거야.\
전처리는 내가 올려준 파일로 불용어제거, 소문자로 통일, 단수로 통일, 내가 올려준 파일로 표제어 추출 및 정규화 등을 진행해서 말뭉치를 형성하고 새로운 열에 넣어줘 "\
<br>

<details>
  <summary>GPT가 알려주는 분석절차</summary>
  
![image](https://github.com/user-attachments/assets/0d384bd6-dcd5-47b4-9cd6-47e7ac9175db)

</details>

<br>

### 5) 말뭉치로 본격적으로 분석하기 
<br>

"가장 많이 나온 단어 20개를 알려줘"\
"시기별(월별)로 가장 많이 나온 단어 10개씩 알려줘"\
"토픽을 8로 해서 LDA토픽모델링을 진행해줘"
"각 토픽의 비중을 시기별로 알 수 있게 막대그래프로 그려줘"
<br>

**토픽모델링이란?**
- 문서 모음에서 토픽을 추출하기 위한 비지도 방식 머신러닝 기술
- 대표적 모델인 ‘잠재 디리클레 할당(LDA, Latent Dirichlet Allocation)’을 사용하면 토픽을 “주어 진 용어 집합이 발생할 확률로 표현”할 수 있고, 이에 따라 문서를 “이러한 토픽들의 혼합체(mixture)로 표현”할 수 있다
- **코퍼스(말뭉치)로부터 ‘상호응집력이 높은 N개의 단어 집합, 즉 토픽을 얻을 수 있음’**

<br>


## 3. 역사 수치 데이터로 상관관계 분석하기
#### 1) 영국, 프랑스, 독일의 수치 데이터 다운로드
<br>

#### 2) ChatGPT에 업로드 후 자료 분석 실시

- 노동쟁의할 때 쌓인 스트레스를 맥주로 풀었을까?
- GDP와 결혼/출생과의 상관관계는?
- 대학생 수와 산업 임금 수준, 대학생들이 많아질수록 산업 현장에서 임금이 높아지는가? = 교육 수준이 임금에 영향을 미쳤는가?
<br>

**상관계수 계산**: 먼저 두 변수 간의 상관계수(예: 피어슨 상관계수, 스피어만 상관계수 등)를 계산합니다. 상관계수는 -1에서 1 사이의 값을 가지며, 이 값이 1에 가까울수록 강한 양의 상관관계, -1에 가까울수록 강한 음의 상관관계를 의미합니다. 0에 가까운 값은 상관관계가 거의 없음을 의미합니다.

<br>

**p값 계산**: 계산된 상관계수의 통계적 유의성을 평가하기 위해 p값을 계산합니다. p값은 상관계수가 우연히 발생했을 가능성을 나타내며, 일반적으로 다음과 같은 기준을 사용합니다:\

p값이 작을수록 (일반적으로 0.05 미만) 상관관계가 유의미하다고 판단합니다. 즉, 두 변수 간의 상관관계가 통계적으로 의미가 있으며, 우연에 의한 것이 아닐 가능성이 높다는 뜻입니다.\
p값이 클수록 상관관계가 유의미하지 않다고 판단합니다. 즉, 두 변수 간의 상관관계가 우연에 의한 것일 수 있다는 뜻입니다.\
<br>

<details>
  <summary>p-값이란?</summary>

사회과학에서 p값(p-value)은 통계적 가설 검정에서 매우 중요한 개념입니다. p값은 주어진 데이터가 귀무가설(null hypothesis)이 참일 때 관찰된 통계량 또는 더 극단적인 값이 나올 확률을 의미합니다. 이 개념을 이해하기 위해 몇 가지 중요한 용어와 개념을 알아야 합니다.

1. 귀무가설과 대립가설\
귀무가설 (H0): 연구에서 검정하고자 하는 기본 가설로, 일반적으로 "효과가 없다"거나 "차이가 없다"는 가정을 의미합니다. 예를 들어, "교육 프로그램이 학생들의 성적에 영향을 미치지 않는다"는 가설이 귀무가설이 될 수 있습니다.\
대립가설 (H1): 귀무가설에 대립하는 가설로, 연구자가 실제로 검증하고자 하는 가설입니다. 예를 들어, "교육 프로그램이 학생들의 성적에 긍정적인 영향을 미친다"는 가설이 대립가설이 될 수 있습니다.<br>
2. p값의 의미\
p값은 귀무가설이 참이라는 전제하에, 현재 관찰된 데이터 또는 더 극단적인 결과가 발생할 확률을 나타냅니다.\
p값이 작을수록 관찰된 데이터가 귀무가설을 지지하지 않는다는 증거가 강해집니다. 즉, 대립가설이 맞을 가능성이 커집니다.<br>
3. 유의수준 (α)\
사회과학에서 흔히 사용되는 유의수준(α)은 0.05입니다. 이는 연구자가 귀무가설을 기각할 기준점으로 설정한 값입니다.\
p값이 유의수준 α보다 작다면, 연구자는 귀무가설을 기각하고 대립가설을 채택합니다. 예를 들어, p값이 0.03이라면 이는 유의수준 0.05보다 작으므로 귀무가설을 기각할 수 있습니다.<br>
4. p값 해석\
**p값 < α (예: p < 0.05): 귀무가설을 기각하고 대립가설을 지지합니다. 연구 결과가 통계적으로 유의미하다고 결론짓습니다.**\
p값 ≥ α (예: p ≥ 0.05): 귀무가설을 기각할 충분한 증거가 없으므로 귀무가설을 유지합니다. 연구 결과가 통계적으로 유의미하지 않다고 결론짓습니다.<br>
5. p값의 한계\
p값은 귀무가설이 참일 때 특정 결과를 얻을 확률만을 알려줍니다. 그것이 대립가설이 참일 가능성을 직접적으로 알려주는 것은 아닙니다.\
p값이 작다고 해서 실제로 큰 효과가 있다는 의미는 아닙니다. 반대로, p값이 크다고 해서 효과가 전혀 없다는 의미도 아닙니다.\
p값은 표본 크기와도 관련이 있습니다. 큰 표본일수록 작은 효과도 유의미한 p값으로 나타날 수 있습니다.<br>
  
</details>
<details>
  <summary>p-값을 구하는 방법</summary>

p-값을 구하는 방법은 여러 가지가 있습니다. 상황에 따라 적합한 방법이 달라집니다:

**회귀분석**: 독립 변수와 종속 변수 간의 관계를 분석하고, 각 독립 변수의 회귀계수에 대한 p-값을 계산합니다. 이 방법은 특정 독립 변수가 종속 변수에 유의미한 영향을 미치는지 평가할 때 유용합니다.

**T-검정 (T-test)**: 두 그룹 간의 평균 차이가 유의미한지 평가할 때 사용됩니다. 예를 들어, 특정 시점 전후의 맥주 소비량의 차이를 분석할 때 사용할 수 있습니다.

**ANOVA (분산분석)**: 세 개 이상의 그룹 간의 평균 차이가 유의미한지 평가할 때 사용됩니다.

**카이제곱 검정 (Chi-square test)**: 범주형 데이터 간의 연관성을 평가할 때 사용됩니다.

**비모수 검정 (Non-parametric tests)**: 데이터가 정규분포를 따르지 않는 경우, Mann-Whitney U 검정이나 Wilcoxon Signed-Rank 검정 등을 사용하여 p-값을 계산할 수 있습니다.

**Pearson 상관계수**: 두 변수 간의 선형 관계의 강도와 방향을 나타내며, 이에 대한 p-값은 그 상관관계가 통계적으로 유의미한지 평가하기 위해 사용됩니다. 이는 회귀분석과는 다르며, 상관관계 분석에 해당합니다.

</details>



